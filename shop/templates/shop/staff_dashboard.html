{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'shop/css/shop.css' %}">
{% endblock extra_css %}

{% block content %}
<div class="container mt-5">
    <h1 class="mb-4">Staff Dashboard</h1>

    <!-- Tabs -->
    <ul class="nav nav-tabs" id="staffTabs" role="tablist">
        <li class="nav-item">
            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#add-product">➕ Add Product</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#manage-orders">Manage Orders</button>
        </li>
    </ul>

    <div class="tab-content mt-4">
        <!-- Add Product -->
        <div class="tab-pane fade show active" id="add-product">
            <h3>Add New Product</h3>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form|crispy }}
                <div class="text-center">
                    <button type="submit" class="btn btn-custom mt-4 mb-5 w-25">Save</button>
                </div>
            </form>
        </div>

        <!-- Manage Orders -->
        <div class="tab-pane fade" id="manage-orders">
            <h3>Manage Orders</h3>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th><th>User</th><th>Total</th><th>Status</th><th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in orders %}
                    <tr>
                        <td>{{ order.id }}</td>
                        <td>{{ order.user.username }}</td>
                        <td>€{{ order.total_price }}</td>
                        <td>{{ order.status }}</td>
                        <td>{{ order.created_at|date:"Y-m-d H:i" }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="5">No orders found.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
