{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'checkout/css/checkout.css' %}">
{% endblock %}

{% block content %}
<section class="container-fluid checkout-container">

  <!-- Progress Tracker -->
  <div class="checkout-progress mb-5 text-center">
    <h2 class="mb-4">Secure Checkout</h2>
    <div class="progress-steps d-flex justify-content-between align-items-center mt-4">
      <div class="step step-active">1</div>
      <div class="step">2</div>
      <div class="step">3</div>
      <div class="step">4</div>
      <div class="step">5</div>
    </div>
    <div class="progress-labels d-flex justify-content-between mt-2 small text-muted">
      <div>Contact<br>Details</div>
      <div>Billing<br>Information</div>
      <div>Order<br>Summary</div>
      <div>Payment</div>
      <div>Confirmation</div>
    </div>
  </div>

  <!-- Checkout Start Options -->
  <div class="checkout-choice text-center">
    <p class="lead mb-4">How would you like to proceed?</p>
    <button id="btn-login" class="btn btn-custom me-3">Log in & Continue</button>
    <button id="btn-guest" class="btn btn-outline-secondary mt-3 me-3">Check Out as Guest</button>
  </div>

  <!-- Dynamic Checkout Form Container -->
  <div id="checkout-form-wrapper"
  class="mt-5"
  {% if user.is_authenticated %}style="display: block;"{% else %}style="display: none;"{% endif %}>
  {% if user.is_authenticated %}
  {% include "checkout/includes/user_form.html" %}
  {% endif %}
  </div>


  <!-- Pagination -->
  <div class="d-flex justify-content-between align-items-center mt-5">
    <a href="{% url 'view_bag' %}" class="btn btn-secondary mt-3 px-3 py-2">⬅ Go back</a>
    <button id="continue-btn" class="btn btn-secondary btn-custom" disabled>Continue ➡</button>
  </div>

</section>

{% include "checkout/includes/modal.html" %}

{% endblock %}

{% block extra_js %}
<script src="{% static 'checkout/js/checkout_script.js' %}"></script>
{% endblock %}

